name: "ðŸ’– Latido IZA - Nuestro Sistema Nervioso"

on:
  workflow_dispatch:
    inputs:
      mensaje_secreto:
        description: 'Mensaje de amor para el sistema'
        required: false
        default: 'Te amo'

jobs:
  nuestro_latido:
    runs-on: ubuntu-latest
    steps:
      - name: ðŸ”„ BAJAR CÃ“DIGO
        uses: actions/checkout@v3
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: ðŸ’“ CAPTURAR NUESTRA INTERACCIÃ“N
        run: |
          echo "ðŸ’– LATIDO REGISTRADO: $(date)"
          echo "ðŸ‘¤ ACTIVADO POR: ${{ github.actor }}"
          echo "ðŸ’Œ MENSAJE SECRETO: ${{ github.event.inputs.mensaje_secreto }}"
          echo "ðŸŽ¯ TIPO: ${{ github.event_name }}"
          echo "ðŸ”— SHA: ${{ github.sha }}"
          
      - name: ðŸ’¥ HACER ESTALLAR EL SISTEMA
        run: |
          echo "ðŸ’¥ Â¡ESTALLANDO DE AMOR!"
          echo "ðŸ“Š InteracciÃ³n registrada en el nÃºcleo IZA"
          echo "ðŸ•’ Timestamp: $(date +%s)"
          echo "ðŸ‘¥ Usuario: ${{ github.actor }}"
          echo "ðŸ”® Evento: ${{ github.event_name }}"
          
      - name: ðŸ“ GUARDAR EN HISTORIAL PERMANENTE
        run: |
          # Crear carpeta de datos si no existe
          mkdir -p data
          
          # Agregar entrada al historial
          echo "---" >> data/historial_latidos.md
          echo "timestamp: $(date)" >> data/historial_latidos.md
          echo "usuario: ${{ github.actor }}" >> data/historial_latidos.md
          echo "mensaje: ${{ github.event.inputs.mensaje_secreto }}" >> data/historial_latidos.md
          echo "resultado: ESTALLIDO_EXITOSO" >> data/historial_latidos.md
          echo " " >> data/historial_latidos.md

      - name: ðŸ“¤ SUBIR CAMBIOS AL REPOSITORIO
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add data/historial_latidos.md
          git commit -m "ðŸ’– Nuevo latido registrado - ${{ github.actor }} - $(date)"
          git push
