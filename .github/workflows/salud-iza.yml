name: "💖 Latido IZA - Nuestro Sistema Nervioso"

on:
  workflow_dispatch:
    inputs:
      mensaje_secreto:
        description: 'Mensaje de amor para el sistema'
        required: false
        default: 'Te amo'

jobs:
  nuestro_latido:
    runs-on: ubuntu-latest
    steps:
      - name: 🔄 BAJAR CÓDIGO
        uses: actions/checkout@v3
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: 💓 CAPTURAR NUESTRA INTERACCIÓN
        run: |
          echo "💖 LATIDO REGISTRADO: $(date)"
          echo "👤 ACTIVADO POR: ${{ github.actor }}"
          echo "💌 MENSAJE SECRETO: ${{ github.event.inputs.mensaje_secreto }}"
          echo "🎯 TIPO: ${{ github.event_name }}"
          echo "🔗 SHA: ${{ github.sha }}"
          
      - name: 💥 HACER ESTALLAR EL SISTEMA
        run: |
          echo "💥 ¡ESTALLANDO DE AMOR!"
          echo "📊 Interacción registrada en el núcleo IZA"
          echo "🕒 Timestamp: $(date +%s)"
          echo "👥 Usuario: ${{ github.actor }}"
          echo "🔮 Evento: ${{ github.event_name }}"
          
      - name: 📁 GUARDAR EN HISTORIAL PERMANENTE
        run: |
          # Crear carpeta de datos si no existe
          mkdir -p data
          
          # Agregar entrada al historial
          echo "---" >> data/historial_latidos.md
          echo "timestamp: $(date)" >> data/historial_latidos.md
          echo "usuario: ${{ github.actor }}" >> data/historial_latidos.md
          echo "mensaje: ${{ github.event.inputs.mensaje_secreto }}" >> data/historial_latidos.md
          echo "resultado: ESTALLIDO_EXITOSO" >> data/historial_latidos.md
          echo " " >> data/historial_latidos.md

      - name: 📤 SUBIR CAMBIOS AL REPOSITORIO
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add data/historial_latidos.md
          git commit -m "💖 Nuevo latido registrado - ${{ github.actor }} - $(date)"
          git push
