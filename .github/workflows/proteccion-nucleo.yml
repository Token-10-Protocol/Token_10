# Editar el workflow corregido
cat > .github/workflows/proteccion-nucleo.yml << 'EOF'
name: ðŸ”’ ProtecciÃ³n del NÃºcleo Token 10
on:
  pull_request:
    paths:
      - 'nucleo/**'

jobs:
  escanear-seguridad:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout cÃ³digo
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: Verificar estructura del nÃºcleo
        run: |
          echo "ðŸ” Verificando estructura del nÃºcleo..."
          ls -la nucleo/
          if [ -f "nucleo/.gitleaks.toml" ]; then
            echo "âœ… Gitleaks config encontrado"
          else
            echo "âŒ Gitleaks config NO encontrado"
            exit 1
          fi

      - name: Escanear secrets en el nÃºcleo
        uses: gitleaks/gitleaks-action@v2
        with:
          config-path: nucleo/.gitleaks.toml  # RUTA CORREGIDA
          path: ./nucleo
          no-git: false

      - name: Verificar archivos crÃ­ticos
        run: |
          echo "ðŸ“‹ Verificando archivos crÃ­ticos..."
          CRITICAL_FILES=(
            "nucleo/.acceso/sistema-puntaje.py"
            "nucleo/.gitleaks.toml"
          )
          
          for file in "${CRITICAL_FILES[@]}"; do
            if [ -f "$file" ]; then
              echo "âœ… $file - OK"
            else
              echo "âŒ $file - FALTANTE"
            fi
          done
          echo "âœ… ProtecciÃ³n del nÃºcleo verificada"
EOF
